#pwd = "error"

alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789 "

letter_index = dict(zip(alphabet, range(len(alphabet))))
index_letter = dict(zip(range(len(alphabet)), alphabet))

def encode(pwd, plain_text):
    encoded_text = ""
    split_plain_text = [
        plain_text[i: i + len(pwd)]
        for i in range(0, len(plain_text), len(pwd))
    ]

    for word_split in split_plain_text:
        i = 0
        for letter in word_split:
            number = (letter_index[letter] + letter_index[pwd[i]]) % len(alphabet)
            encoded_text += index_letter[number]
            i += 1

    return encoded_text


def decode(pwd, cipher_text):
    decoded_text = ""
    split_cipher_text = [
        cipher_text[i: i + len(pwd)]
        for i in range(0, len(cipher_text), len(pwd))
    ]

    for word_split in split_cipher_text:
        i = 0
        for letter in word_split:
            number = (letter_index[letter] - letter_index[pwd[i]]) % len(alphabet)
            decoded_text += index_letter[number]
            i += 1

    return decoded_text
'''
def hashing(pwd):
    alphabet = "abcdefghijklmnopqrstuvwxyz "

    letter_to_index = dict(zip(alphabet, range(len(alphabet))))
    index_to_letter = dict(zip(range(len(alphabet)), alphabet))
'''
def user_bank_code():
    f = open("bank_code.txt", "w+")

    print("insert bank code: ")
    f.write(str(input()))

    f.close()

def code_secret():
    f = open("code_secret.txt", "r+")

    if f.read() == "":
        f.write(str(input()))

    f.close()

def change_code_secret():
    f = open("code_secret.txt", "w")

    print("insert your new secret code: ")
    f.write(str(input()))

    f.close()

def create_code_secret():
    f = open("code_secret.txt", "w")

    print("insert your secret code: ")
    f.write(str(input()))

    f.close()

def get_pwd():
    f = open("code_secret.txt", "r")

    if pwd != f.read():
        newpwd =  f.read()
    f.close()
    return newpwd

def pwd_to_newpwd():
    pwd = get_pwd()
    return pwd

#test
if __name__ == "__main__":
    pwd = 'jotaRo'
    message = '195873859MkaudO'
    encoded_text = encode(pwd, message)
    decoded_text = decode(pwd,encoded_text)

    print(message)
    print(encoded_text)
    print(decoded_text)
